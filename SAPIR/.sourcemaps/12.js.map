{"version":3,"sources":["../../src/pages/mylisting/mylisting.module.ts","../../src/pages/mylisting/mylisting.ts"],"names":[],"mappings":"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","file":"12.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MylistingPage } from './mylisting';\nimport { TranslateModule, TranslateLoader} from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    MylistingPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MylistingPage),\n    TranslateModule\n  ],\n})\nexport class MylistingPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mylisting/mylisting.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams,LoadingController,AlertController } from 'ionic-angular';\nimport{PoviderForAllProvider} from '../../providers/povider-for-all/povider-for-all';\nimport { Storage } from '@ionic/storage';\nimport { TranslateService, LangChangeEvent } from '@ngx-translate/core';\n\nimport {Validators,FormBuilder,FormGroup,FormControl} from '@angular/forms';\nimport { Platform , Nav} from 'ionic-angular';\nimport { LanguageModel } from \"../../models/language.model\";\nimport { LanguageServiceProvider } from '../../providers/language-service/language-service';\n/**\n * Generated class for the MylistingPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage({\n  name:'page-mylisting'\n})\n@Component({\n  selector: 'page-mylisting',\n  templateUrl: 'mylisting.html',\n})\nexport class MylistingPage {\n  properties:any =[];\n  loading:any;\n  maxPages:any;\n  currentPage:any;\n  newPageNum:any;\n  user:any=[];\n  myProfileform: FormGroup;\n  userDetails=[];\n  userInfo=[];\n  languageSelected : any;\n  languages : Array<LanguageModel>;\n  lanCss:any;\n  selectOptions:any;\n  constructor(public languageService: LanguageServiceProvider,public navCtrl: NavController, public navParams: NavParams ,public poviderForAllProvider:PoviderForAllProvider,public translate: TranslateService,\n    public loadingCtrl:LoadingController,public storage:Storage,public alertCtrl:AlertController) {\n      this.languages = this.languageService.getLanguages();\n      this.getUserDetails();\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad MylistingPage');\n    this.getToken();\n  }\n  // SHOW LISTING\n\nmyListing(){\nconsole.log(\"My LISTING\"+\" TOKEN === \"+this.user);\n\nif(this.user){\n  this.showLoader();\n  this.poviderForAllProvider.getMyListing(this.user).then(data => { \n    console.log(\" response\"+JSON.stringify(data));\n\n    if(data.property){\n    this.properties=[];\n    this.properties.push(data.property);\n    console.log(\"NUll PROPERTIES  == \"+JSON.stringify(this.properties));\n    this.loading.dismiss();\n    this.maxPages=data.max_num_pages;\n    this.currentPage=data.paged;\n    }else{\n      this.loading.dismiss();\n      this.properties=[];\n      this.properties.push(data.max_num_pages);\n    }\n\n\n  });\n}else\n{\n  console.log(\"TOKEN NOT FOUND\");\n}\n }\n\n showLoader(){\n  this.loading = this.loadingCtrl.create({\n    content: 'Please wait...'\n  });\n  this.loading.present();\n}\n\ngetToken(){\nconsole.log(\"GET TOKEN\");\n  this.storage.get('user').then((val) => {\n    this.user = val.token;\n    this.userInfo= val;\n    this.myListing();\n\n    console.log(\"USER INFO == \",this.userInfo);\n    console.log(\"User TOKEN == \"+this.user);\n  });\n\n}\n\n// PAGE Info\n\nopenPropertyDetail(propertyDetails:any){\n  console.log('send Details'+JSON.stringify(propertyDetails));    \n  this.navCtrl.push('page-propertyinfo',\n  {\n  'propertyDetails':propertyDetails\n  });\n}\n\n//INFINITY SCROllER\n\ndoInfinite(infiniteScroll,getPageNum) {\n\n  this.newPageNum = parseInt(getPageNum)+parseInt('1');\n  if(this.newPageNum<=this.maxPages){\n    // console.log(\"NEW PAGE  == \"+this.newPageNum+ \" MAX PAGES    = \"+this.maxPages);\n      this.currentPage = this.newPageNum;\n  this.poviderForAllProvider.getMyListing(this.user,this.newPageNum)\n  .then(data => {\n    this.currentPage=data.paged;\n    for(let i=0;i<data.property.length;i++){\n              this.properties[0].push(data.property[i]);\n          }\n      infiniteScroll.complete();\n  })\n  .catch(error => alert(error));\n  console.log('Begin async operation');\n  // infiniteScroll.complete();\n\n }else{          \n     console.log(\"YOUR LIMIT IS DONE\");\n     infiniteScroll.complete();\n }\n\n}\n\n\ndeleteProperty(property){\n  console.log(property);\n this.showLoader();\nlet data ={\"post_id\":property.id, \"update_type\":\"delete\",\"token\":this.user};\nthis.poviderForAllProvider.post('update_property_data',data).subscribe(data=>{\n  console.log(\"DELETE DATA === \",data.msg);\n  // this.myListing();\n  if(data.msg){\nlet myList = this.properties[0].length;\nconsole.log(\"LENGTH === \"+myList+\" property Delete \");\n\n    this.storage.get('user').then((val) => {\n      console.log(\"LOCAL STORAGE === \",JSON.stringify(val));\n      val.no_of_properties =parseInt(val.no_of_properties)-1;\n      this.storage.set('user', val);\n      for(let i=0;i<myList;i++){\n        console.log(\"LOOP PROPERTIES \"+JSON.stringify(this.properties[0][i].id)+\" PROPERTY ID === \"+property.id);\n        if(this.properties[0][i].id==property.id){\n          // console.log(\"DEL prop\"+JSON.stringify(this.properties[0][i].id)+\" match property \"+property.id);\n            this.properties[0].splice(i, 1);\n            break;\n            // console.log(\" DELETE MY LIST PROPERT MATCHED == \"+this.properties[0][i].id);\n        }\n      }\n    })\n  }\n  this.showAlert(data.msg);\n  this.loading.dismiss();\n\n},err=>{\n  console.log(err);\n  this.loading.dismiss();\n})\n\n}\n\neditProperty(property){\n  this.navCtrl.push('page-edit-property',{\n   'editProperty':property\n  });\n}\n\n\nshowAlert(msg) {\n  const prompt = this.alertCtrl.create({\n    title: 'MESSAGE!',\n    message: msg,\n    buttons: [\n      {\n        text: 'Close',\n        handler: data => {\n          console.log('Saved clicked');\n        }\n      }\n    ]\n  });\n  prompt.present();\n\n}\n\ngetUserDetails(){\n  this.storage.get('user').then(details =>{\n    // console.table(details);\n    this.translate.use(details.selected_language);\n    this.lanCss = details.selected_language;\n    \n  })\n}\n\n // Languages\n setLanguage(){\n    \n  let defaultLanguage = this.translate.getDefaultLang();\n  console.log(\"LANGUAGE === \"+defaultLanguage);\n  if(this.languageSelected){\n    this.translate.setDefaultLang(this.languageSelected);\n    this.translate.use(this.languageSelected);\n    \n    this.storage.get('user').then(details =>{\n      this.poviderForAllProvider.UpdateLanguage('https://sapir.app/wp-json/mobileapi/update_app_language',details.token,this.languageSelected).subscribe(val=>{\n       \n      })\n\n      details.selected_language=this.languageSelected;\n      this.storage.set('user',details);\n      this.lanCss =  this.languageSelected;\n\n    })\n\n  }else{\n    this.languageSelected = defaultLanguage;\n    this.translate.use(defaultLanguage);\n\n  }\n  this.selectOptions = {\n    cssClass: this.lanCss,\n  };\n}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/mylisting/mylisting.ts"],"sourceRoot":""}