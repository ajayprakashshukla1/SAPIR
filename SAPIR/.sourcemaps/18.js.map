{"version":3,"sources":["../../src/pages/favorite-list/favorite-list.module.ts","../../src/pages/favorite-list/favorite-list.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACO;AACG;AACmB;AAWtE;IAAA;IAAqC,CAAC;IAAzB,sBAAsB;QATlC,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,wEAAgB;aACjB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,wEAAgB,CAAC;gBAC1C,4EAAe;aAChB;SACF,CAAC;OACW,sBAAsB,CAAG;IAAD,6BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;ACdO;AAC6D;AAClC;AAC/B;AACkC;AAEoB;AACP;AAC9C;AAEvC;;;;;GAKG;AASH;IAaE,0BAAmB,eAAwC,EAAQ,qBAA2C,EAAQ,OAAsB,EAAS,SAAoB,EAAQ,iBAAmC,EAAQ,WAA6B,EAChP,OAAe,EAAQ,SAAyB,EAAQ,SAA2B,EAAQ,MAAc;QAD/F,oBAAe,GAAf,eAAe,CAAyB;QAAQ,0BAAqB,GAArB,qBAAqB,CAAsB;QAAQ,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAQ,sBAAiB,GAAjB,iBAAiB,CAAkB;QAAQ,gBAAW,GAAX,WAAW,CAAkB;QAChP,YAAO,GAAP,OAAO,CAAQ;QAAQ,cAAS,GAAT,SAAS,CAAgB;QAAQ,cAAS,GAAT,SAAS,CAAkB;QAAQ,WAAM,GAAN,MAAM,CAAQ;QAXpH,cAAS,GAAe,EAAE,CAAC;QAC3B,mBAAc,GAAY,IAAI,CAAC;QAWzB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,CAAC;QACrD,IAAI,CAAC,cAAc,EAAE,CAAC;IAC1B,CAAC;IAED,yCAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,iCAAiC,CAAC,CAAC;QAC/C,IAAI,CAAC,oBAAoB,EAAE,CAAC;IAE9B,CAAC;IACD,0CAAe,GAAf;QACE,OAAO,CAAC,GAAG,CAAC,4DAA4D,CAAC,CAAC;QAC1E,+BAA+B;IAEjC,CAAC;IAED,eAAe;IACf,+CAAoB,GAApB;QAAA,iBAyBC;QAxBC,qBAAqB;QACrB,IAAI,CAAC,UAAU,GAAE,IAAI,CAAC,QAAQ,GAAC,CAAC,CAAC;QACjC,8EAA8E;QAC9E,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;YAC9B,KAAI,CAAC,SAAS,GAAC,GAAG,CAAC,KAAK,CAAC;YACzB,OAAO,CAAC,GAAG,CAAC,eAAe,GAAC,KAAI,CAAC,SAAS,CAAC,CAAC;YAC5C,OAAO,CAAC,GAAG,CAAC,cAAc,GAAC,KAAI,CAAC,SAAS,GAAC,yBAAyB,GAAC,KAAI,CAAC,UAAU,CAAC,CAAC;YACrF,KAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC,EAAC,KAAI,CAAC,SAAS,CAAC;iBACpD,IAAI,CAAC,cAAI;gBACN,OAAO,CAAC,GAAG,CAAC,qBAAqB,GAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;gBAExD,EAAE,EAAC,IAAI,CAAC,QAAQ,CAAC,EAAC;oBACd,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC;gBACnC,CAAC;gBACD,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC;gBAC3B,KAAI,CAAC,QAAQ,GAAC,IAAI,CAAC,aAAa,CAAC;gBACjC,EAAE,EAAC,KAAI,CAAC,QAAQ,IAAE,CAAC,CAAC,EAAC;oBACjB,KAAI,CAAC,SAAS,GAAE,EAAE,CAAC;gBACvB,CAAC;gBACD,OAAO,CAAC,GAAG,CAAC,gBAAgB,GAAC,KAAI,CAAC,QAAQ,GAAC,eAAe,GAAC,KAAI,CAAC,QAAQ,CAAC,CAAC;gBAC1E,KAAI,CAAC,cAAc,GAAG,KAAK,CAAC;YAAC,CAAC,CAAC,CAAC;QAEtC,CAAC,CAAC,CAAC;QACH,0BAA0B;IAC9B,CAAC;IAED,kBAAkB;IAClB,qCAAU,GAAV,UAAW,QAAQ;QAAnB,iBA6BD;QA5BM,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;QAC9B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;YAClC,KAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,QAAQ,EAAC,GAAG,EAAC,CAAC,CAAC;iBAC9C,IAAI,CAAC,kBAAQ;gBACV,IAAI,aAAa,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBAC1C,GAAG,EAAC,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,aAAa,EAAC,CAAC,EAAE,EAAC,CAAC;oBAC7B,EAAE,EAAC,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,IAAE,QAAQ,CAAC,EAAE,CAAC,EAAC;wBAClC,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;wBAC5B,OAAO,CAAC,GAAG,CAAC,8BAA8B,GAAC,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;oBACrE,CAAC;oBAAA,IAAI,EAAC;wBACF,OAAO,CAAC,GAAG,CAAC,iBAAiB,GAAC,KAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;oBAExD,CAAC;gBACL,CAAC;gBACD,IAAI,GAAG,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC,QAAQ,CAAC;gBACnC,OAAO,CAAC,GAAG,CAAC,cAAc,GAAC,GAAG,CAAC,CAAC;gBAChC,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;oBAC9B,OAAO,EAAE,GAAG;oBACZ,QAAQ,EAAE,SAAS;oBACnB,QAAQ,EAAE,IAAI;iBACjB,CAAC,CAAC;gBACH,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YACzB,CAAC,CAAC;iBACD,KAAK,CACF,eAAK,IAAI,cAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAlC,CAAkC,CAC1C,CAAC;QACN,CAAC,CAAC,CAAC;IAEP,CAAC;IAGG,mBAAmB;IAEnB,qCAAU,GAAV,UAAW,cAAc,EAAC,UAAU;QAApC,iBA2BD;QA1BG,6BAA6B;QAC7B,OAAO,CAAC,GAAG,CAAC,YAAY,GAAC,UAAU,CAAC,CAAC;QACrC,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,UAAU,CAAC,GAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QACrD,OAAO,CAAC,GAAG,CAAC,aAAa,GAAC,IAAI,CAAC,UAAU,GAAE,mBAAmB,GAAC,UAAU,GAAC,YAAY,GAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAEtG,EAAE,EAAC,IAAI,CAAC,UAAU,IAAE,IAAI,CAAC,QAAQ,CAAC,EAAC;YAC/B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC;YACpC,0EAA0E;YACtE,OAAO,CAAC,GAAG,CAAC,mBAAmB,GAAC,cAAc,GAAC,IAAI,CAAC,QAAQ,GAAC,oBAAoB,GAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACvG,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,EAAC,IAAI,CAAC,SAAS,CAAC;iBAClE,IAAI,CAAC,cAAI;gBACN,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC;gBAC3B,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC;gBACnC,OAAO,CAAC,GAAG,CAAC,wBAAwB,GAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAC,6CAA6C,GAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;gBAC1H,GAAG,EAAC,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAC,CAAC,EAAE,EAAC,CAAC;oBACpC,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC1C,CAAC;gBACF,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YAC5B,CAAC,CAAC,CAAC,KAAK,CAAC,eAAK,IAAI,YAAK,CAAC,KAAK,CAAC,EAAZ,CAAY,CAAC,CAAC;YAChC,OAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;YACtC,cAAc,CAAC,QAAQ,EAAE,CAAC;QAC1B,CAAC;QAAA,IAAI,EAAC;YACF,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;YAClC,cAAc,CAAC,QAAQ,EAAE,CAAC;QAC9B,CAAC;IAEJ,CAAC;IAED,kBAAkB;IAElB,qCAAU,GAAV,UAAW,QAAQ;QACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,mBAAmB,EAAE;YACtC,IAAI,EAAE,QAAQ,CAAC,EAAE;YACjB,iBAAiB,EAAE,QAAQ;SAC3B,CAAC,CAAC;IACD,CAAC;IAGL,sBAAsB;IACpB,qCAAU,GAAV;QACE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACrC,OAAO,EAAE,gBAAgB;SAC1B,CAAC,CAAC;QACH,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IACzB,CAAC;IAED,yCAAc,GAAd;QAAA,iBAQC;QAPC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,iBAAO;YACnC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YACvB,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;YAC9C,KAAI,CAAC,MAAM,GAAG,OAAO,CAAC,iBAAiB,CAAC;YACxC,OAAO,CAAC,GAAG,CAAC,gBAAgB,GAAC,KAAI,CAAC,MAAM,CAAC,CAAC;YAC1C,OAAO,CAAC,GAAG,CAAC,wBAAwB,EAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;QAClE,CAAC,CAAC;IACJ,CAAC;IAED,YAAY;IACd,sCAAW,GAAX;QAAA,iBAwBC;QAtBC,IAAI,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,CAAC;QACtD,OAAO,CAAC,GAAG,CAAC,eAAe,GAAC,eAAe,CAAC,CAAC;QAC7C,EAAE,EAAC,IAAI,CAAC,gBAAgB,CAAC,EAAC;YACxB,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;YACrD,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;YAC1C,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,iBAAO;gBACnC,KAAI,CAAC,qBAAqB,CAAC,cAAc,CAAC,yDAAyD,EAAC,OAAO,CAAC,KAAK,EAAC,KAAI,CAAC,gBAAgB,CAAC,CAAC,SAAS,CAAC,aAAG;oBACtJ,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAC,GAAG,CAAC,CAAC;gBACxC,CAAC,CAAC;gBACF,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;gBACvB,OAAO,CAAC,iBAAiB,GAAC,KAAI,CAAC,gBAAgB,CAAC;gBAChD,OAAO,CAAC,GAAG,CAAC,cAAc,EAAC,OAAO,CAAC,CAAC;gBACpC,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAC,OAAO,CAAC,CAAC;gBACjC,KAAI,CAAC,MAAM,GAAI,KAAI,CAAC,gBAAgB,CAAC;gBACrC,KAAI,CAAC,MAAM,CAAC,OAAO,CAAC,aAAa,EAAE,OAAO,CAAC,iBAAiB,CAAC,CAAC;YAEhE,CAAC,CAAC;QACJ,CAAC;QAAA,IAAI,EAAC;YACJ,IAAI,CAAC,gBAAgB,GAAG,eAAe,CAAC;YACxC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QAEtC,CAAC;IACH,CAAC;IA/KY,gBAAgB;QAL5B,gEAAS,CAAC;YACT,QAAQ,EAAE,oBAAoB;WACG;SAClC,CAAC;kOAeoC,iEAAqN;YACxO,OAAO,EAAkB,IAAwE;OAdvG,gBAAgB,CAoL5B;IAAD,CAAC;AAAA;SApLY,gBAAgB,gB","file":"18.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { FavoriteListPage } from './favorite-list';\nimport { TranslateModule, TranslateLoader} from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    FavoriteListPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(FavoriteListPage),\n    TranslateModule\n  ],\n})\nexport class FavoriteListPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/favorite-list/favorite-list.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams,LoadingController, ToastCmp, ToastController } from 'ionic-angular';\nimport{FavouriteProvider} from '../../providers/favourite/favourite';\nimport{Storage} from '@ionic/storage';\nimport { TranslateService, LangChangeEvent } from '@ngx-translate/core';\nimport { LanguageModel } from \"../../models/language.model\";\nimport { LanguageServiceProvider } from '../../providers/language-service/language-service';\nimport{PoviderForAllProvider} from '../../providers/povider-for-all/povider-for-all';\nimport { Events } from 'ionic-angular';\n\n/**\n * Generated class for the FavoriteListPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage({\n  name:'page-favorite-list'\n})\n\n@Component({\n  selector: 'page-favorite-list',\n  templateUrl: 'favorite-list.html',\n})\n\nexport class FavoriteListPage {\nloading:any;\n\nfavorites: Array<any> = [];\nloadingContent: Boolean = true;\npropPage:number;\nmaxPages:any;\nnewPageNum:any;\nproperties:any;\nuserToken:any;\nlanguageSelected : any;\nlanguages : Array<LanguageModel>;\nlanCss:any;\n  constructor(public languageService: LanguageServiceProvider,public poviderForAllProvider:PoviderForAllProvider,public navCtrl: NavController, public navParams: NavParams,public favouriteProvider:FavouriteProvider,public loadingCtrl:LoadingController,\n    public storage:Storage,public toastCtrl:ToastController,public translate: TranslateService,public events: Events) {\n      this.languages = this.languageService.getLanguages();  \n      this.getUserDetails();\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad FavoriteListPage');\n    this.getFavouriteProperty();\n\n  }\n  ionViewDidEnter(){\n    console.log('ionViewDidEnter========================== FavoriteListPage');\n    // this.getFavouriteProperty();\n\n  }\n \n  // GET PROPERTY\n  getFavouriteProperty(){\n    // this.showLoader();\n    this.newPageNum =this.propPage+1;\n    //console.log(\"GET PAGE NUm =\"+this.propPage+\"  .PAGE ==== \"+this.newPageNum);\n    this.storage.get('user').then((val) => {\n        this.userToken=val.token;\n        console.log(\"TOKEN   ==== \"+this.userToken);\n        console.log(\"USER TOKEN =\"+this.userToken+\"NEW PAGE NUMBER =======\"+this.newPageNum);\n        this.favouriteProvider.getFavorites(1,this.userToken)\n        .then(data => {\n            console.log(\"FAVORITES DATA === \"+JSON.stringify(data));\n\n            if(data.property){\n                this.favorites = data.property;\n            }    \n            this.propPage = data.paged;\n            this.maxPages=data.max_num_pages;\n            if(this.maxPages==0){\n                this.favorites =[];\n            }\n            console.log(\"GET PAGE NUm =\"+this.propPage+\"  .PAGE ==== \"+this.maxPages);\n            this.loadingContent = false; }); \n\n      }); \n      // this.loading.dismiss();\n  }\n\n  // DELETE PROPERTY\n  deleteItem(favorite) {\n       console.log(\"UNFAVOURITE\");\n    this.storage.get('user').then((val) => {\n    this.favouriteProvider.favorite(favorite,val,0)\n    .then(property => {\n        let favPropLength = this.favorites.length;\n        for(let i=0;i<favPropLength;i++){\n            if(this.favorites[i].id==favorite.id){\n                this.favorites.splice(i, 1);\n                console.log(\"FAVORITE PROPERT MATCHED == \"+this.favorites[i].id);\n            }else{\n                console.log(\"NOT MATCHED == \"+this.favorites[i].id);\n\n            }\n        }\n        var msg = property.json().response;\n        console.log(\"MESSAGE  == \"+msg);\n        let toast = this.toastCtrl.create({\n            message: msg,\n            cssClass: 'mytoast',\n            duration: 2000\n        });\n        toast.present(toast);\n    })\n    .catch(\n        error => console.log(JSON.stringify(error))\n        );\n    });\n\n}\n\n   \n    //INFINITY SCROllER\n\n    doInfinite(infiniteScroll,getPageNum) {   \n      // infiniteScroll.complete();\n      console.log(\"PAGE NUM =\"+getPageNum);\n      this.newPageNum = parseInt(getPageNum)+parseInt('1');\n      console.log(\"ADD page = \"+this.newPageNum+ \"  OLD PAGE NUM = \"+getPageNum+\" max PAGE \"+this.maxPages);\n\n      if(this.newPageNum<=this.maxPages){\n          this.propPage = this.newPageNum;\n      //    alert(\"NEW PAGE NUM = \"+this.newPageNum+\"MAX PAGES \"+this.maxPages);\n          console.log(\"IN IF CONDITION =\"+\"MAX PAGES = \"+this.maxPages+\" NEW PAGE NUMBER =\"+this.newPageNum);\n      this.favouriteProvider.getFavorites(this.newPageNum,this.userToken)\n      .then(data => {\n          this.propPage = data.paged;\n          this.maxPages = data.max_num_pages;\n          console.log(\"Scrooling Response == \"+JSON.stringify(data)+\" ========= Scrooling DATA LEANGTH =========\"+data.property.length);\n              for(let i=0;i<data.property.length;i++){\n                  this.favorites.push(data.property[i]);\n              }\n             this.loading = false; \n      }).catch(error => alert(error));\n      console.log('Begin async operation');\n     infiniteScroll.complete();\n     }else{          \n         console.log(\"YOUR LIMIT IS DONE\");\n         infiniteScroll.complete();\n     }\n\n  }\n\n  //Property Details\n\n  itemTapped(favorite) {\n\t\tthis.navCtrl.push('page-propertyinfo', {\n\t\t\t'id': favorite.id,\n\t\t\t'propertyDetails': favorite\n\t\t});\n    }\n\n\n// DELETE PROPERTY END\n  showLoader(){\n    this.loading = this.loadingCtrl.create({\n      content: 'Please wait...'\n    });\n    this.loading.present();\n  }\n\n  getUserDetails(){\n    this.storage.get('user').then(details =>{\n      console.table(details);\n      this.translate.use(details.selected_language);\n      this.lanCss = details.selected_language;\n      console.log(\" LANGUAGE CSS \"+this.lanCss);\n      console.log(\"user language ======= \",details.selected_language);\n    })\n  }\n\n  // Languages\nsetLanguage(){\n    \n  let defaultLanguage = this.translate.getDefaultLang();\n  console.log(\"LANGUAGE === \"+defaultLanguage);\n  if(this.languageSelected){\n    this.translate.setDefaultLang(this.languageSelected);\n    this.translate.use(this.languageSelected);\n    this.storage.get('user').then(details =>{\n      this.poviderForAllProvider.UpdateLanguage('https://sapir.app/wp-json/mobileapi/update_app_language',details.token,this.languageSelected).subscribe(val=>{\n      console.log(\"Change Language === \",val);   \n      })\n      console.table(details);\n      details.selected_language=this.languageSelected;\n      console.log(\"user details\",details);\n      this.storage.set('user',details);\n      this.lanCss =  this.languageSelected;\n      this.events.publish('lan:created', details.selected_language); \n\n    })\n  }else{\n    this.languageSelected = defaultLanguage;\n    this.translate.use(defaultLanguage);\n\n  }\n}\n\n  \n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/favorite-list/favorite-list.ts"],"sourceRoot":""}